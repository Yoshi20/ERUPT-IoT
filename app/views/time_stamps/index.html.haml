.row
  .col
    %h1.page__title= t('time_stamps.title2')

.row
  .col
    = form_tag time_stamps_path, method: :get, class: "form" do
      .field.form-group{style: 'width: 60%;'}
        = select_tag :member_filter, options_for_select(Member.where(is_hourly_worker: true).order(:first_name).map{ |m| ["#{m.first_name} #{m.last_name[0]}.", m.id]}, params[:member_filter]), {prompt: 'Filter', class: 'form-control', id: 'select_hourly_worker'}
  .col
    %p= "Total scan_events count = #{@total_scan_events.count}"
  .col
    %p.text-center= "Yellow => IN / Green => OUT"

.scan_event-list
  %table.table.table-hover
    %thead.table-header
      %tr
        %th Timestamp
        %th= t('activerecord.attributes.member.first_name')
        %th= t('activerecord.attributes.member.last_name')
        %th.text-center= "IN"
        %th.text-center= "OUT"
        %th.text-center= "Δt [h]"
        %th.text-center= "Monthly Δt [h]"

    %tbody.scan_event-list-body#time_stamps
      - @scan_events.each do |scan_event|
        = render partial: 'time_stamps/scan_event', locals: {scan_event: scan_event} if scan_event.member.present?


  .admin-actions
    .admin-actions__link
      = button_to time_stamps_export_path, method: :post, class:'btn btn-ghost btn-square' do
        %span.material-icons.admin-actions__link__icon= 'assignment_return'
    .admin-actions__link
      = link_to time_stamps_path(member_filter: params[:member_filter]), class:'btn btn-ghost btn-square' do
        %span.material-icons.admin-actions__link__icon= 'refresh'

:javascript
  document.addEventListener('turbolinks:load', function() {
    $('#select_hourly_worker').on("change", function() {
      $(this).closest('form').submit();
    });
  });

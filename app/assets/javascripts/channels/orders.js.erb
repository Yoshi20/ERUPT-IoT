//= require cable
//= require set_orders_event_listener

App.orders = App.cable.subscriptions.create('OrdersChannel', {
  received: function(order) {
    $.ajax({
      method: 'get',
      url: 'orders/' + order.id,
      data: null,
      dataType: 'html',
      error: function() {
        return console.log("error: get order partial ajax request");
      },
      success: function(response) {
        $('#orders').append(response);
        $('#orders').find('tr:last').addClass('fadeIn')
        set_orders_event_listener();
        return
      }
    });
  }
});
